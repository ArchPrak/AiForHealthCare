You can check the [API documentation](api-reference/get-variables) to generate code to do this in any language.


<Note>First, [create a user and get an access token](guides/create-user) if you haven't done that already.</Note>

This function fetches user-defined and public variables based on specified criteria.
Variables can include treatments, symptoms, or any custom user data.
It allows for filtering based on a search phrase, sorting by measurement time, and optionally includes public variables.

```javascript
async function fetchUserVariables(searchPhrase, includePublic = true, limit = 10, offset = 0) {
    const baseUrl = 'https://safe.fdai.earth/api/v3/userVariables';
    const params = new URLSearchParams({
        includePublic: includePublic,
        limit: limit,
        offset: offset,
        searchPhrase: searchPhrase,
        sort: '-latestMeasurementTime'
    });

    const response = await fetch(`${baseUrl}?${params.toString()}`, {
        method: 'GET',
        headers: {
            'accept': 'application/json',
            'Authorization': `Bearer ${getFdaiUserAccessToken()}`,
            'X-CLIENT-ID': getFdaiClientId(),
        },
        credentials: 'include'
    });

    if (!response.ok) {
        throw new Error('Network response was not ok');
    }
    return await response.json();
}
```

<Info>The `fetchUserVariables` function accepts `searchPhrase` as a required parameter to filter variables, and `includePublic`, `limit`, and `offset` as optional parameters with default values.</Info>

<Warning>Ensure you have the correct access permissions for the variables you are attempting to fetch, especially when including public variables.</Warning>

<Tip>Use the `sort` parameter to manage the order of returned variables, such as by their latest measurement time here.</Tip>

<Steps>
  <Step title="Configure Parameters">
    Set up your query parameters like `searchPhrase` and decide whether to include public variables.
  </Step>
  <Step title="Make the API Call">
    Call the `fetchUserVariables` function with the desired parameters to retrieve the variables.
  </Step>
  <Step title="Handle the Response">
    Process the JSON response to utilize the fetched variables in your application.
  </Step>
</Steps>
